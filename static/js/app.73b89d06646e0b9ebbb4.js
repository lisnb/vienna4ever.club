webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),a=s("GLwI"),i=s("+zVC"),r=(s("VzBF"),s("VC+z"),s("VXnA"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"about"}},[e("f7-block-title",[this._v("From vienna "),e("i",{staticClass:"icon icon-heart_fill"}),this._v(" with love")]),this._v(" "),e("f7-block",{attrs:{strong:""}},[e("p",[this._v("more is coming...")])]),this._v(" "),e("f7-link",{attrs:{href:"/chatroom/",text:"聊天","icon-ios":"f7:info_fill","icon-md":"material:info"}})],1)},staticRenderFns:[]}),o=s("VU/8")(null,r,!1,null,null,null).exports,l=s("mtWM"),c=s.n(l),m={mounted:function(){var t=this;c.a.get("/static/db/members.json").then(function(e){var s=e.data;t.groups=s.groups})},methods:{memberDetail:function(){this.$f7.notification.create({title:"Vienna4ever",text:"尚无更多信息",closeButton:!0}).open()}},data:function(){return{groups:[]}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"members"}},t._l(t.groups,function(e){return s("div",{key:e.label},[s("f7-block-title",[t._v(t._s(e.label))]),t._v(" "),s("f7-list",t._l(e.members,function(e){return s("f7-list-item",{key:e.name,attrs:{link:"#",after:"查看详情",title:e.nickname},on:{click:function(e){return e.preventDefault(),t.memberDetail(e)}}},[s("img",{attrs:{slot:"media",src:"/static/avatars/"+e.name+".jpeg",width:"60"},slot:"media"}),t._v(" "),s("span",{style:{color:e.pts>0?"green":"red"},attrs:{slot:"footer"},slot:"footer"},[t._v(t._s(e.pts)+" pts")])])}))],1)}))},staticRenderFns:[]},u=s("VU/8")(m,f,!1,null,null,null).exports,d={data:function(){return{events:[]}},mounted:function(){var t=this;c.a.get("/static/db/events.json").then(function(e){var s=e.data;t.events=s.events})}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"notifications"}},t._l(t.events,function(e){return s("div",{key:JSON.stringify(e)},t._l(e.repeat,function(t){return s("f7-card",{key:t,attrs:{title:e.title,content:e.content+", "+e.bonus.toString()+" pts",footer:e.datetime}})}))}))},staticRenderFns:[]},v=s("VU/8")(d,p,!1,null,null,null).exports,h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("f7-page",[e("f7-navbar",[e("f7-nav-title",[this._v("维也纳")])],1),this._v(" "),e("f7-tabs",{attrs:{"tab-routable":""}},[e("f7-tab",{attrs:{id:"tab-1"}}),this._v(" "),e("f7-tab",{attrs:{id:"tab-2"}}),this._v(" "),e("f7-tab",{attrs:{id:"tab-3"}})],1),this._v(" "),e("f7-toolbar",{attrs:{tabbar:"",labels:""}},[e("f7-link",{attrs:{"tab-link":"","route-tab-id":"tab-1",href:"/","tab-link-active":"",text:"成员","icon-ios":"f7:person_fill","icon-md":"material:person"}}),this._v(" "),e("f7-link",{attrs:{"tab-link":"","route-tab-id":"tab-2",href:"/tab-notifications/",text:"事件","icon-ios":"f7:email_fill","icon-md":"material:email"}}),this._v(" "),e("f7-link",{attrs:{"tab-link":"","route-tab-id":"tab-3",href:"/tab-about/",text:"关于","icon-ios":"f7:info_fill","icon-md":"material:info"}})],1)],1)},staticRenderFns:[]},b=s("VU/8")({},h,!1,null,null,null).exports,g=s("mvHQ"),_=s.n(g),k=s("Gu7T"),y=s.n(k),x={data:function(){return{messagesData:[{name:"Kate",type:"received",text:"Hi, I am good!",avatar:"http://lorempixel.com/100/100/people/9"}],members:[],responseInProgress:!1,session:{message:null,wsconn:null}}},mounted:function(){var t=this;c.a.get("/static/db/members.json").then(function(e){e.data.groups.forEach(function(e){var s;e.members&&(s=t.members).push.apply(s,y()(e.members))});var s=t.members[Math.floor(Math.random()*t.members.length)];t.session.message={name:s.nickname,text:"",avatar:"http://"+document.location.host+"/static/avatars/"+s.name+".jpeg"}}),this.$f7ready(function(){t.messagebar=t.$refs.messagebar.f7Messagebar,t.messages=t.$refs.messages.f7Messages}),this.session.wsconn=new WebSocket("ws://"+document.location.host+"/ws"),this.session.wsconn.onclose=function(t){console.log("connection closed")},this.session.wsconn.onmessage=function(e){console.log(e),t.onMessageReceived(e.data)}},methods:{isFirstMessage:function(t,e){var s=this.messagesData[e-1];return!t.isTitle&&(!s||s.type!==t.type||s.name!==t.name)},isLastMessage:function(t,e){var s=this.messagesData[e+1];return!t.isTitle&&(!s||s.type!==t.type||s.name!==t.name)},isTailMessage:function(t,e){var s=this.messagesData[e+1];return!t.isTitle&&(!s||s.type!==t.type||s.name!==t.name)},onMessageReceived:function(t){var e=JSON.parse(t);e.type=e.name===this.session.message.name?"sent":"received",this.messagesData.push(e)},sendMessage:function(){var t=this.messagebar.getValue();if(t.trim().length){this.messagebar.clear(),t.length&&this.messagebar.focus();var e=this.session.message;e.text=t;var s=_()(e);this.session.wsconn.send(s)}}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("f7-page",[s("f7-navbar",{attrs:{title:"Messsages"}}),t._v(" "),s("f7-messagebar",{ref:"messagebar"},[s("f7-link",{attrs:{slot:"inner-end","icon-ios":"f7:arrow_up_fill","icon-md":"material:send"},on:{click:t.sendMessage},slot:"inner-end"})],1),t._v(" "),s("f7-messages",{ref:"messages"},[s("f7-messages-title",[s("b",[t._v("Sunday, Feb 9,")]),t._v(" 12:58\n    ")]),t._v(" "),t._l(t.messagesData,function(e,n){return s("f7-message",{key:n,attrs:{type:e.type,name:e.name,avatar:e.avatar,first:t.isFirstMessage(e,n),last:t.isLastMessage(e,n),tail:t.isTailMessage(e,n)}},[e.text?s("span",{attrs:{slot:"text"},domProps:{innerHTML:t._s(e.text)},slot:"text"}):t._e()])})],2)],1)},staticRenderFns:[]},M=[{path:"/",component:b,tabs:[{path:"/",id:"tab-1",component:u},{path:"/tab-notifications/",id:"tab-2",component:v},{path:"/tab-about/",id:"tab-3",component:o}]},{path:"/chatroom",component:s("VU/8")(x,w,!1,null,null,null).exports}],V={data:function(){return{f7params:{id:"io.framework7.testapp",name:"Framework7",theme:"auto",routes:M}}}},F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("f7-app",{attrs:{params:this.f7params}},[e("f7-view",{attrs:{id:"main-view",url:"/",main:""}})],1)},staticRenderFns:[]},$=s("VU/8")(V,F,!1,null,null,null).exports;a.a.use(i.a),new n.a({el:"#app",template:"<app/>",components:{app:$}})},"VC+z":function(t,e){},VXnA:function(t,e){},VzBF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.73b89d06646e0b9ebbb4.js.map